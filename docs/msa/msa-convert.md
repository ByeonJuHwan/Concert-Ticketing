# 콘서트 예약하기 시스템 MSA 전환

## Monolithic 설계의 한계점

콘서트 예약의 경우 순식간에 엄청난 트래픽이 몰리는 경우가 대다수입니다.
실제 콘서트 예약을 해보면 진입 순간부터 대기열이 2만명, 3만명인 경험을 한 적이 있을 겁니다.

현재 구현상 1개의 서버 즉 `Monolithic`한 설계로 구성되어 있습니다. 이때 대용량 트래픽이 몰린다면 스케일업, 혹은 스케일 아웃을 통해서 대용량 트래픽을 받아낼 수 있을 겁니다.

하지만 스케일업은 성능을 향상시킬 수 있는 물리적 한계가 존재하기 때문에, 일반적으로 스케일 아웃으로 대응하는 것이 보편적입니다.

현재 시스템 구성은 크게 아래 5가지 기능으로 구성되어 있습니다.

- 대기열
- 콘서트 조회
- 예약
- 결제
- 포인트

`Monolithic` 구조의 경우 스케일 아웃 시 5개 기능이 전부 함께 스케일 아웃됩니다.
하지만 콘서트 예약이라는 큰 그림에서 보면, 병렬적으로 들어오는 요청을 제일 앞단에서 처리해주는 **대기열**이 가장 많은 트래픽을 담당합니다. 따라서 대기열 기능만 따로 스케일 아웃 전략을 가져가고 싶은 경우가 생깁니다.

이러한 경우 `Monolithic` 서비스로는 대응이 어렵기 때문에, `MSA`로 각 도메인을 작은 단위의 서버로 분리하여 각기 다른 전략으로 대용량 트래픽 처리가 가능합니다.

## MSA 서버 분리

위와 같이 크게 5개의 기능을 담당할 서비스(Service) 즉, 작은 단위의 서버를 아래와 같이 구성했습니다

- Token-Service(대기열 등록, 현재 대기열 조회)
- Concert-Service(콘서트 조회/예약)
- Payment-Service(결제)
- User-Service(유저등록, 포인트 충전/조회)

이제 부터 실제 서버를 분리해보면서 어떤 문제점이 발생하였고, 어떻게 해결해나갔는지 작성해보겠습니다.

